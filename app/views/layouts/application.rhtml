<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title> 
      <% if @category %>
        Noosfero &rarr; <%= @category.full_name %>
      <% else %>
        Noosfero
      <% end %>
    </title>
    <meta name="description" content="FIXME: Descriptions of Noosfero" />
    <meta name="keywords" content="Noosfero, Community, Open Source" />
    <%= design_all_header_tags %>
    <%= stylesheet_link_tag 'common' %>
    <%= stylesheet_link_tag 'help' %>
    <%= stylesheet_link_tag 'menu' %>
    <%= stylesheet_link_tag 'button' %>
    <%= stylesheet_link_tag 'search' %>
    <%= javascript_include_tag 'menu' %>
    <%# cms stuff %>
    <% if params[:controller] == 'cms' %>
      <%= javascript_include_tag 'cms' %>
    <% end %>

    <%# FIXME this is temporary for tests  %>
    <%= stylesheet_link_tag 'composer' %>
  </head>

  <body class='category<%= category_color %>'>

    <% unless flash[:notice].nil? %>
      <div id='notice'>
        <%= flash[:notice] %>
        <%= javascript_tag(visual_effect(:fade, "notice", :duration => 2.0)) %>
      </div>
    <% end %>

    <div id="wrap">

      <div id='noosfero_bar' style='position: absolute;'>
        <div id='accessibility_bar'>
          <div id='accessibility_menu'>
           <a href='#content' id='icon_go_content'><span><%= _('Go to content') %></span></a>
           <!-- <%= shortcut_header_links %> -->
          </div><!-- accessibility_menu -->
          <div id='path_category'>
            Voce esta navgeando na FIXME.
            <% if @category %>
              <%= @category.full_name %>
            <% end %>
            <%= javascript_tag(visual_effect(:fade, "path_category", :duration => 10)) %>
          </div>
           </div><!-- accessibility_bar -->
        <div id='search_box'>
          <%= search_box %>
        </div><!-- id='search_box' -->

        <div id='navigation_bar'>
          <SCRIPT LANGUAGE="JavaScript"> <!-- FIXME: Tirar o script daqui caso seja solucao adotada -->
          function posset(chkbox, group) {
          var posSetting = (chkbox.checked) ? "fixed" : "absolute"
          document.getElementById(group).style.position = posSetting
          }
          </SCRIPT>
          <INPUT TYPE="checkbox" NAME="Fix" VALUE="0" onClick="posset(this, 'noosfero_bar')" style='float: left; font-size: 2px'><%= image_tag 'noosfero.png', :style => 'float: left;' %>

          <%= render :file => 'shared/categories_menu' %>
        </div><!-- id='navigation_bar' -->

        <script type="text/javascript">
          prepareMenu('navigation_bar', { timeout: 5 });
        </script>
      </div><!-- id="noosfero_bar" -->

      <div id='frame'><!-- Frame que envolve toda pagina de um usuario -->
        <div id='header'>
          <!-- Abaixo um cabeÃ§alho especifico para a pagina de usuario. -->
        </div><!-- id='header' -->
        <div id='content'>
          <!-- <a name='main_content'/></a> -->
          <div id='header_content'>
          </div>

          <%# FIXME this is temporary %>
          <% if params[:controller] == 'composer' %>
            <%= yield %>
          <% else %>
            <%= design_display(yield) %>
          <% end %>

        </div><!-- id="content" -->
        <div id="footer_content"><!-- Rodape do onteudo -->
        </div><!-- id="footer_content" -->
      </div><!-- id="frame" -->
    </div><!-- id="wrap" -->

    <div id="footer">
      <!-- <a name='footer'/></a> -->
      <%= localist_menu %>
      <%= footer %>
    </div><!-- id="footer" -->
  </body>
</html>
