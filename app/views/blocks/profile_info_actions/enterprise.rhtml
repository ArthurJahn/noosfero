<ul>
  <%if logged_in? %>
    <%if !user.favorite_enterprises.include?(profile) %>
      <li><%= link_to content_tag('span', __('Add favorite enterprise')), { :profile => user.identifier, :controller => 'favorite_enterprises', :action => 'add', :id => profile.id }, :class => 'button with-text icon-add' %></li>
    <% end %>
    <% if profile.members.include?(user) %>
      <li><%= link_to content_tag('span', __('Leave this enterprise')), { :profile => user.identifier, :controller => 'memberships', :action => 'leave', :id => profile.id }, :class => 'button with-text icon-delete' %></li>
    <% else %>
      <li><%= link_to content_tag('span', __('Join this enterprise')), { :profile => user.identifier, :controller => 'memberships', :action => 'join', :id => profile.id }, :class => 'button with-text icon-add' %></li>
    <% end %>
  <% end %>
</ul>
