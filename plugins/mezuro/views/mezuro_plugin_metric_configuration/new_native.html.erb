<script src="/plugins/mezuro/javascripts/validations.js" type="text/javascript"></script>

<h2><%= @configuration_content.name %> Configuration</h2>

<%= hidden_field_tag :id, @configuration_content.id %>
<% form_for :metric_configuration, :url => {:action =>"create_native", :controller => "mezuro_plugin_metric_configuration"},  :method => :get do |f| %>
  <%= f.hidden_field :configuration_id, :value => @configuration_content.configuration_id %>
  
  <%= labelled_form_field _('Collector Name:'), f.text_field(:base_tool_name, :value => @base_tool_name, :readonly => true) %>

  <% f.fields_for :metric do |m| %>
  
    <% @metric.language.each do |language| %>
      <%= m.hidden_field :language, :multiple => true, :value => language %>
    <% end %>
    
    <%= m.hidden_field "scope", :value => @metric.scope %>

    <p>
      <%= m.label :name, "Metric Name:" %>
      <%= @metric.name %>
      <%= m.hidden_field "name", :value => @metric.name %>
    </p>
      <% m.label :description, "Description:" %>
      <% @metric.description %>
      <% m.hidden_field "description", :value => @metric.description %>
  <% end %>
  
  <%= required labelled_form_field _('Code:'), f.text_field(:code) %>

  <%= required labelled_form_field _('Aggregation Form:'),
  f.select(:aggregation_form, MezuroPlugin::Helpers::ContentViewerHelper.aggregation_options) %>

  <%= required labelled_form_field _('Weight:'), f.text_field(:weight) %>
  
  <%= required labelled_form_field _('Reading Group:'),
  f.select(:reading_group_id, @reading_group_names_and_ids) %>

  <p>
    <%= f.submit "Add" %>
  </p>

<% end %>

